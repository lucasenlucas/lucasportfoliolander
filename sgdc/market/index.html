<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SGDC Live ‚Äî Market</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#0E1023; --panel:#17193A; --card:#131736; --text:#E9ECFF; --muted:#A3A9D8;
  --good:#4BD37B; --bad:#FF6B6B; --border:#FFFFFF1A; --shadow:0 18px 40px rgba(0,0,0,.45);
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,sans-serif;background:radial-gradient(1200px 600px at 10% -10%,#14183d 0,#0E1023 60%);color:var(--text)}

.nav{max-width:1200px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;gap:10px}
.back{border:1px solid var(--border);background:#ffffff14;padding:8px 12px;border-radius:12px;text-decoration:none;color:var(--text);font-weight:600}
.spacer{flex:1}
.balance{font-weight:800;color:var(--good)}
.help{cursor:pointer;font-weight:800;border:1px solid var(--border);background:#ffffff14;padding:8px 12px;border-radius:12px}

.container{max-width:1200px;margin:0 auto;padding:22px 16px 64px}
.summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
.box{background:linear-gradient(180deg,var(--panel),#111431);border:1px solid var(--border);border-radius:18px;padding:16px;box-shadow:var(--shadow)}
.label{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
.value{margin-top:6px;font-weight:800;font-size:22px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px;margin-top:18px}
.card{background:linear-gradient(180deg,var(--card),#101432);border:1px solid var(--border);border-radius:18px;padding:14px;box-shadow:var(--shadow);text-decoration:none;color:var(--text);display:block;transition:transform .18s ease, border-color .18s ease}
.card:hover{transform:translateY(-4px);border-color:#ffffff2e}
.row{display:flex;align-items:center;justify-content:space-between;gap:10px}
.name{font-weight:800}
.ticker{font-size:12px;color:var(--muted)}
.pill{background:#ffffff1a;border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px}
.pill.up{color:var(--good)} .pill.down{color:var(--bad)}

/* Onboarding overlay */
#onboard{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:9999}
.on-card{background:#15193A;border-radius:20px;padding:24px;max-width:500px;width:90%;color:var(--text);box-shadow:var(--shadow);text-align:center}
.on-card h2{margin:0 0 12px;font-size:22px}
.on-card p{margin:0 0 18px;color:var(--muted)}
.on-buttons{display:flex;justify-content:center;gap:10px}
.on-btn{background:#8a7cff;border:none;padding:10px 16px;border-radius:12px;font-weight:700;color:#fff;cursor:pointer}
.on-btn.alt{background:#444}
</style>
</head>
<body>
  <nav class="nav">
    <a class="back" href="../">‚Üê Terug</a>
    <div class="spacer"></div>
    <div class="balance">Bits: <span id="bitsHeader">0</span></div>
    <div class="help" id="helpBtn">?</div>
  </nav>

  <main class="container">
    <div class="summary">
      <div class="box"><div class="label">Wallet</div><div class="value"><span id="bitsWallet">0</span> Bits</div></div>
      <div class="box"><div class="label">Ge√Ønvesteerd</div><div class="value"><span id="bitsInvested">0</span></div></div>
      <div class="box"><div class="label">Markt vs gisteren</div><div class="value"><span id="marketDelta">0.00%</span></div></div>
    </div>
    <section class="grid" id="assetGrid"></section>
  </main>

  <!-- Onboarding overlay -->
  <div id="onboard" style="display:none">
    <div class="on-card">
      <h2 id="onTitle">Welkom bij SGDC Market</h2>
      <p id="onText">Hier gebruik je je Bits om te investeren in grappige coins.</p>
      <div class="on-buttons">
        <button class="on-btn alt" id="onPrev" style="display:none">Vorige</button>
        <button class="on-btn" id="onNext">Volgende</button>
      </div>
    </div>
  </div>

<script>
// --- Persistente Bits over pagina's heen ---
const STORAGE_KEY = 'sgdc.bits';
const balanceEl = document.getElementById('bitsHeader');
let balance = Number.parseInt(localStorage.getItem(STORAGE_KEY) ?? '0', 10);
if (Number.isNaN(balance)) balance = 0;
function renderBits() { if (balanceEl) balanceEl.textContent = balance; document.getElementById('bitsWallet').textContent=balance; }
function setBits(val){ balance=Math.max(0,Math.floor(Number(val)||0)); localStorage.setItem(STORAGE_KEY,String(balance)); renderBits(); }
function addBits(a){ setBits(balance+Number(a||0)); }
function resetBits(){ localStorage.removeItem(STORAGE_KEY); setBits(0); }
window.sgdcBits={get:()=>balance,set:setBits,add:addBits,reset:resetBits,key:STORAGE_KEY};
renderBits();

// --- Market dummy data ---
const assets=[
 {sym:"SNK",name:"Snacko",icon:"üç™",price:95,yClose:90},
 {sym:"FRIK",name:"Frikandelium",icon:"üå≠",price:42,yClose:45},
 {sym:"COKE",name:"ColaCap",icon:"ü•§",price:60,yClose:62},
 {sym:"BBIT",name:"Bitterbit",icon:"üü§",price:33,yClose:31}
];
function renderGrid(){
  const wrap=document.getElementById('assetGrid');
  wrap.innerHTML=assets.map(a=>{
    const pct=((a.price-a.yClose)/a.yClose*100).toFixed(2);
    return `<a class="card" href="./asset.html?symbol=${a.sym}">
      <div class="row">
        <div style="display:flex;gap:10px;align-items:center">
          <div class="pill">${a.icon}</div>
          <div><div class="name">${a.name}</div><div class="ticker">${a.sym}</div></div>
        </div>
        <div style="text-align:right">
          <div class="name">‚Çø${a.price}</div>
          <div class="pill ${pct>=0?'up':'down'}">${pct>=0?'+':''}${pct}%</div>
        </div>
      </div>
    </a>`;
  }).join('');
}
renderGrid();

// --- Onboarding ---
const steps=[
 {t:"Welkom bij SGDC Market",x:"Hier gebruik je je Bits om te investeren in grappige coins."},
 {t:"Je Bits Wallet",x:"Bovenin zie je hoeveel Bits je hebt. Dit is je budget."},
 {t:"Coins",x:"Elke coin stijgt of daalt. Je ziet de waarde en procentuele verandering."},
 {t:"Kopen & Verkopen",x:"Klik op een coin om details en een grafiek te zien. Daar kun je kopen en verkopen."},
 {t:"Succes!",x:"Je bent klaar om te beginnen!"}
];
let step=0;
const onboard=document.getElementById('onboard');
const onTitle=document.getElementById('onTitle');
const onText=document.getElementById('onText');
const onPrev=document.getElementById('onPrev');
const onNext=document.getElementById('onNext');

function showStep(i){
  step=i;
  onTitle.textContent=steps[i].t;
  onText.textContent=steps[i].x;
  onPrev.style.display=i>0?'inline-block':'none';
  onNext.textContent=i===steps.length-1?'Start!':'Volgende';
}
onPrev.onclick=()=>showStep(step-1);
onNext.onclick=()=>{
  if(step<steps.length-1) showStep(step+1);
  else { onboard.style.display='none'; localStorage.setItem('sgdc.market.onboarded','1'); }
};
document.getElementById('helpBtn').onclick=()=>{onboard.style.display='flex';showStep(0);}
if(!localStorage.getItem('sgdc.market.onboarded')){ onboard.style.display='flex'; showStep(0); }
</script>
</body>
</html>
